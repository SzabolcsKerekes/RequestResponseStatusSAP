<mvc:View
    controllerName="reqresproject.controller.DetailView"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:uxap="sap.uxap"
    xmlns="sap.m"
    displayBlock="true"
    xmlns:c="sap.ui.core"
    xmlns:commons="sap.suite.ui.commons"
>
    <Page 
        id="detailPage"
        showNavButton="true"
        enableScrolling="true"
        navButtonPress=".onPressNavigationBackToMainPage"
    >
        <uxap:ObjectPageLayout>
            <uxap:headerContent>
                <FlexBox direction="Column">
                    <Text id="textPwTitle" text="{i18n>text.auslosenummer}: {applicationModel>/Header/PW_NR}"/>
                    <Text id="textCreationDate" text="{i18n>text.erstelldatum}: {path: 'applicationModel>/Header/CREATED_ON', formatter: '.formatter.formatDate'}"/>
                    <commons:MicroProcessFlow id="statusContainerMaster">
                        <commons:content>
                            <commons:MicroProcessFlowItem icon="sap-icon://edit"
                                state="{parts:[{path: 'applicationModel>/Header/STAT'},{path: 'applicationModel>/Header/GAEKO_Status'}], formatter: '.formatter.formatStateBullet1'}"
                                title="In Arbeit">
                            </commons:MicroProcessFlowItem>
                            <commons:MicroProcessFlowItem icon="sap-icon://inspection"
                                state="{parts:[{path: 'applicationModel>/Header/STAT'},{path: 'applicationModel>/Header/GAEKO_Status'}], formatter: '.formatter.formatStateBullet2'}"
                                title="Zur Genehmigung">
                            </commons:MicroProcessFlowItem>
                            <commons:MicroProcessFlowItem icon="sap-icon://lead"
                                visible="{applicationModel>/isGaekoAvailable}"
                                state="{parts:[{path: 'applicationModel>/Header/STAT'},{path: 'applicationModel>/Header/GAEKO_Status'}], formatter: '.formatter.formatStateBullet3'}"
                                title="Bezahlt">
                            </commons:MicroProcessFlowItem>
                            <commons:MicroProcessFlowItem icon="sap-icon://accept"
                                state="{parts:[{path: 'applicationModel>/Header/STAT'},{path: 'applicationModel>/Header/GAEKO_Status'}], formatter: '.formatter.formatStateBullet4'}"
                                title="Genehmigt">
                            </commons:MicroProcessFlowItem>
                        </commons:content>
                    </commons:MicroProcessFlow>
                </FlexBox>
            </uxap:headerContent>
            <uxap:sections>
                <uxap:ObjectPageSection title="{i18n>text.tab_allgemeine}">
                    <uxap:ObjectPageSubSection>
                        <Panel expandable="true"
                            expanded="true">
                            <headerToolbar>
                                <OverflowToolbar height="3rem">
                                    <Title text="{i18n>text.projektbedarf}"
                                        id="titleHeaderDetails"/>
                                    <ToolbarSpacer />
                                    <Button id="editDataBtn"
                                        visible="false"
                                        enabled="{applicationModel>/bEnabledChangeHeader}"
                                        icon="sap-icon://edit"
                                        press="onPressEditPwHeader"
                                        type="Ghost">
                                    </Button>
                                    <Button id="saveDataBtn"
                                        icon="sap-icon://save"
                                        visible="false"
                                        press="onPressUpdatePwHeader"
                                        type="Ghost">
                                    </Button>
                                    <Button id="discardDataBtn"
                                        icon="sap-icon://cancel"
                                        visible="false"
                                        press="onPressDiscardChanges"
                                        type="Ghost">
                                    </Button>
                                </OverflowToolbar>
                            </headerToolbar>
                            <content>
                                <c:Fragment
                                    fragmentName="reqresproject.view.fragments.GeneralDataReadOnly"
                                    type="XML"
                                />
                                <c:Fragment
                                    fragmentName="reqresproject.view.fragments.GeneralDataEdit"
                                    type="XML"
                                />
                            </content>
                        </Panel>
                    </uxap:ObjectPageSubSection>
                </uxap:ObjectPageSection>

                <uxap:ObjectPageSection title="{i18n>text.tab_positionen}">
                    <uxap:ObjectPageSubSection>
                        <Panel expandable="true"
                            expanded="true">
                            <headerToolbar>
                                <OverflowToolbar height="3rem">
                                    <Title text="Teile hinzufÃ¼gen"
                                        id="titleHeaderDetails2"/>
                                    <ToolbarSpacer />
                                    <Button id="editDataBtn2"
                                        visible="true"
                                        enabled="{applicationModel>/bEnabledChangeHeader}"
                                        icon="sap-icon://edit"
                                        press="onPressEditPwHeader"
                                        type="Ghost">
                                    </Button>
                                    <Button id="saveDataBtn2"
                                        icon="sap-icon://save"
                                        visible="false"
                                        press="onPressUpdatePwHeader"
                                        type="Ghost">
                                    </Button>
                                    <Button id="discardDataBtn2"
                                        icon="sap-icon://cancel"
                                        visible="false"
                                        press="onPressDiscardChanges"
                                        type="Ghost">
                                    </Button>
                                </OverflowToolbar>
                            </headerToolbar>
                            <c:Fragment fragmentName="reqresproject.view.fragments.Sachnummer"
                                type="XML" 
                            />
                        </Panel>
                    </uxap:ObjectPageSubSection>
                </uxap:ObjectPageSection>
                
            </uxap:sections>
        </uxap:ObjectPageLayout>
    </Page>
</mvc:View>